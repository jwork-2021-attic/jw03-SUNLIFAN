# W03

## Task 1: example 代码工作原理

1. **example实现隐写的原理**

图片由很多像素组成，每个像素有一个 ARGB 值（Java中是一个 int），最高字节是 A (alpha) 值，表示透明	度，后三个字节分别是 RGB 值，用来表示红/绿/蓝色的程度。如果把后三个字节每个字节的最后两位拿出来专门表示别的信息，由于 RGB 值改变的很少，整个图片在人眼看上去并不会有明显的差别，由于一张图有很多像	素，这样就空出了很多位可以拿来存储别的信息，而又不容易使人察觉图片的变化。example 就是BubbleSorter 的 .class 文件的相关内容编码到这些空出来的位中，实现了隐写的目的。



2.  **encode 的工作原理**

就如 1 中所说，encode 方法先获取图片的 pixel 的 ARGB 值，在前 4N/3 个 pixel （假设要编码的信息有 N 个字节）的 ARGB 值中将 后三个字节每个字节的最低两位换成要编码的位。然后再将这样处理过得到的新的ARGB 值数组设为图片（对应Java中的bufferedImage对象）的 ARGB 数组，得到编码后的图片。



3. **decode 的工作原理**

decode 方法把图片的每个像素的 ARGB 值的后三个字节的每个字节的最低两位分离出来，以 byte 为单位把这些信息存储在一个byte数组里。

从 encodeFile 方法中可以看出来，这样decode 出来的原始字节文件包含以下信息：

（1）文件名的长度：用 4 个字节记录

（2）文件内容的长度：用 4 个字节记录。

（3）文件名：若干 byte （即（1）中的大小），由 char 转换而来。

（4）.class 文件的内容：若干byte（即（2）中的大小）

（5）编码时未用到的多余的空位：若干 byte，其值就是原本对应位置像素的 pixel 的 ARGB 值中表示颜色的位的一部分。

修改 decode 方法之后只需要留下 （4）对应的内容。



4.  **SteganographyClassLoader 的工作原理**

   从 url 上获得图片文件的信息，经过 decode 得到 .class 文件，创建 class 对象之后即可用来创建 BubbleSorter 的实例。

   



## Task 2：

![example.InsertionSorter](https://i.loli.net/2021/09/27/7GiMhHFCoBj23dW.png)

https://i.loli.net/2021/09/27/7GiMhHFCoBj23dW.png



![example.QuickSorter](https://i.loli.net/2021/09/26/M7xmdaBNXr8gVKo.png)

https://i.loli.net/2021/09/26/M7xmdaBNXr8gVKo.png

## Task3:

可视化链接： https://asciinema.org/a/438281 插排版本

可视化链接：https://asciinema.org/a/438283 快排版本

## Task 4:

使用 201250182 郑义 的图片：

1. SelectionSorter - 结果正确

   视频链接：https://asciinema.org/a/JdRe4x7zldKMPNxiDqFwpdJJP

2. QuickSorter - 结果正确

   视频链接：https://asciinema.org/a/3lipbSFQfxmhcRhZ5yH9xj2Uk
